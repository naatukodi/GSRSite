<div class="container my-4" *ngIf="chicken; else loading">
  <!-- Chicken Overview -->
  <h2 class="text-center mb-4">{{ chicken.name }} ({{ chicken.breed }})</h2>
  <div class="row justify-content-center mb-5">
    <div class="col-md-6 text-center">
      <p><strong>Weight:</strong> {{ chicken.weight }} kg</p>
      <p><strong>Date of Birth:</strong> {{ chicken.dateOfBirth | date }}</p>
      <p><strong>Status:</strong> {{ chicken.status }}</p>
      <p><strong>Batch ID:</strong> {{ chicken.batchId }}</p>
    </div>
  </div>

  <!-- Grouped Health Records -->
  <h3 class="text-center mb-3">Health Records (Grouped by Month)</h3>

  <!-- Accordion for grouped health records -->
  <div class="accordion" id="healthRecordsAccordion">
    <div class="accordion-item" *ngFor="let group of groupedRecords; let i = index">
      <h2 class="accordion-header" [attr.id]="'heading'+i">
        <button
          class="accordion-button collapsed"
          type="button"
          data-bs-toggle="collapse"
          [attr.data-bs-target]="'#collapse'+i"
          aria-expanded="false"
          [attr.aria-controls]="'collapse'+i">
          Month: {{ group.period }}
        </button>
      </h2>
      <div
        [attr.id]="'collapse'+i"
        class="accordion-collapse collapse"
        [attr.aria-labelledby]="'heading'+i"
        data-bs-parent="#healthRecordsAccordion">
        <div class="accordion-body">
          <ul class="list-group">
            <li class="list-group-item" *ngFor="let record of group.records">
              <strong>{{ record.date | date:'mediumDate' }}:</strong>
              Weight: {{ record.weight }} kg,
              Appetite: {{ record.appetite ? 'Good' : 'Poor' }},
              Vaccinated: {{ record.vaccinated ? 'Yes' : 'No' }}<br>
              <em>{{ record.notes }}</em>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading / Error States -->
<ng-template #loading>
  <p *ngIf="errorMessage; else spinner">{{ errorMessage }}</p>
  <ng-template #spinner>
    <p>Loading chicken details...</p>
  </ng-template>
</ng-template>

<router-outlet></router-outlet>
